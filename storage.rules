rules_version = '2';

// Digital Maturity Assessment - Secure Storage Rules
// Complete lockdown except for public assets
service firebase.storage {
  match /b/{bucket}/o {
    
    // Public assets folder - read-only access
    match /public/{allPaths=**} {
      allow read: if true;
      allow write: if false; // Only admin/server can upload public assets
    }
    
    // Development test files (if needed)
    match /test/{allPaths=**} {
      // Only allow in non-production environments
      // In production, this should be commented out
      allow read, write: if true; 
    }
    
    // Legacy surveys folder - read-only for migration period
    // TODO: Remove after migration is complete
    match /surveys/{surveyId} {
      allow read: if true; // Temporary for migration
      allow write: if false; // No new survey writes to Storage
    }
    
    // Archived data (admin access only)
    match /archive/{allPaths=**} {
      allow read, write: if false; // Admin SDK only
    }
    
    // Default: deny everything else
    match /{allPaths=**} {
      allow read, write: if false;
    }
  }
}
